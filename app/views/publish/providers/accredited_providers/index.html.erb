<% content_for :page_title, title_with_error_prefix("Accredited providers", nil) %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-l">
      Accredited providers
    </h1>

    <%= govuk_button_link_to("Add accredited provider", search_publish_provider_recruitment_cycle_accredited_providers_path(
      provider_code: @provider.provider_code,
      recruitment_cycle_year: @provider.recruitment_cycle_year
    )) %>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <% if @provider.accredited_bodies.none? %>
        <p class="govuk-body">There are no accredited providers for <%= @provider.provider_name %>.</p>
    <% else %>
      <% @provider.accredited_bodies.each do |accredited_body| %>
        <%= render AccreditedProviderComponent.new(provider_name: accredited_body[:provider_name], remove_path: delete_publish_provider_recruitment_cycle_accredited_provider_path(accredited_provider_code: accredited_body[:provider_code]), about_accredited_provider: accredited_body[:description], change_about_accredited_provider_path: edit_publish_provider_recruitment_cycle_accredited_provider_path(accredited_provider_code: accredited_body[:provider_code])) %>
      <% end %>
    <% end %>
  </div>
</div>
