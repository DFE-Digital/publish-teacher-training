<% if FeatureService.enabled?(:db_backed_funding_type) %>
  <%= render "publish/shared/error_wrapper", error_keys: %i[funding program_type], data_qa: "course__funding_type" do %>
    <fieldset class="govuk-fieldset">
      <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
        <h1 class="govuk-fieldset__heading">
          <% if course.course_code %>
            <%= render CaptionText.new(text: course.name_and_code) %>
          <% else %>
            <%= render CaptionText.new(text: t("course.add_course")) %>
          <% end %>
          Funding type
        </h1>
      </legend>

      <%= render "publish/shared/error_messages", error_keys: %i[funding program_type] %>
      <div class="govuk-radios govuk-!-margin-top-2" data-module="govuk-radios">
        <div class="govuk-radios__item">
          <%= form.radio_button :funding,
                  "fee",
                  class: "govuk-radios__input", checked: course.fee? %>
          <%= form.label :funding,
                  "Fee - no salary",
                  value: "fee",
                  class: "govuk-label govuk-radios__label",
                  data: { qa: "course__funding_type_fee" } %>
        </div>

        <div class="govuk-radios__item">
          <%= form.radio_button :funding,
                  "salary",
                  class: "govuk-radios__input", checked: course.salary? %>
          <%= form.label :funding,
                  "Salary",
                  value: "salary",
                  class: "govuk-label govuk-radios__label",
                  data: { qa: "course__funding_type_salary" } %>
        </div>

        <div class="govuk-radios__item">
          <%= form.radio_button :funding,
                  "apprenticeship",
                  class: "govuk-radios__input", checked: course.apprenticeship? %>
          <%= form.label :funding,
                  "Teaching apprenticeship - with salary",
                  value: "apprenticeship",
                  class: "govuk-label govuk-radios__label",
                  data: { qa: "course__funding_type_apprenticeship" } %>
        </div>
      </div>

          <%= form.hidden_field :previous_tda_course, value: params[:previous_tda_course] %>
    </fieldset>
  <% end %>

<% else %>

<%= render "publish/shared/error_wrapper", error_keys: %i[funding_type program_type], data_qa: "course__funding_type" do %>
  <fieldset class="govuk-fieldset">
    <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
      <h1 class="govuk-fieldset__heading">
        <% if course.course_code %>
          <%= render CaptionText.new(text: course.name_and_code) %>
        <% else %>
          <%= render CaptionText.new(text: t("course.add_course")) %>
        <% end %>
        Funding type
      </h1>
    </legend>

    <%= render "publish/shared/error_messages", error_keys: %i[funding_type program_type] %>
    <div class="govuk-radios govuk-!-margin-top-2" data-module="govuk-radios">
      <div class="govuk-radios__item">
        <%= form.radio_button :funding_type,
                "fee",
                class: "govuk-radios__input" %>
        <%= form.label :funding_type,
                "Fee - no salary",
                value: "fee",
                class: "govuk-label govuk-radios__label",
                data: { qa: "course__funding_type_fee" } %>
      </div>

      <div class="govuk-radios__item">
        <%= form.radio_button :funding_type,
                "salary",
                class: "govuk-radios__input" %>
        <%= form.label :funding_type,
                "Salary",
                value: "salary",
                class: "govuk-label govuk-radios__label",
                data: { qa: "course__funding_type_salary" } %>
      </div>

      <div class="govuk-radios__item">
        <%= form.radio_button :funding_type,
                "apprenticeship",
                class: "govuk-radios__input" %>
        <%= form.label :funding_type,
                "Teaching apprenticeship - with salary",
                value: "apprenticeship",
                class: "govuk-label govuk-radios__label",
                data: { qa: "course__funding_type_apprenticeship" } %>
      </div>
    </div>

         <%= form.hidden_field :previous_tda_course, value: params[:previous_tda_course] %>
  </fieldset>
<% end %>

<% end %>
