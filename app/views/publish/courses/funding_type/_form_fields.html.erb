<%= render "publish/shared/error_wrapper", error_keys: %i[funding program_type], data_qa: "course__funding_type" do %>
  <fieldset class="govuk-fieldset">
    <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
      <h1 class="govuk-fieldset__heading">
        <% if course.course_code %>
          <%= render CaptionText.new(text: course.name_and_code) %>
        <% else %>
          <%= render CaptionText.new(text: t("course.add_course")) %>
        <% end %>
        Funding type
      </h1>
    </legend>

    <%= render "publish/shared/error_messages", error_keys: %i[funding program_type] %>
    <div class="govuk-radios govuk-!-margin-top-2" data-module="govuk-radios">
      <div class="govuk-radios__item">
        <%= form.radio_button :funding,
                "fee",
                class: "govuk-radios__input", checked: course.fee? %>
        <%= form.label :funding,
                "Fee - no salary",
                value: "fee",
                class: "govuk-label govuk-radios__label",
                data: { qa: "course__funding_type_fee" } %>
      </div>

      <div class="govuk-radios__item">
        <%= form.radio_button :funding,
                "salary",
                class: "govuk-radios__input", checked: course.salary? %>
        <%= form.label :funding,
                "School direct - with salary",
                value: "salary",
                class: "govuk-label govuk-radios__label",
                data: { qa: "course__funding_type_salary" } %>
      </div>

      <div class="govuk-radios__item">
        <%= form.radio_button :funding,
                "apprenticeship",
                class: "govuk-radios__input", checked: course.apprenticeship? %>
        <%= form.label :funding,
                "Postgraduate teaching apprenticeship (PGTA) - with salary",
                value: "apprenticeship",
                class: "govuk-label govuk-radios__label",
                data: { qa: "course__funding_type_apprenticeship" } %>
      </div>

      <% if params.dig(:course, :qualification) == "undergraduate_degree_with_qts" %>
        <div class="govuk-radios__item">
          <%= form.radio_button :funding,
                  "apprenticeship",
                  class: "govuk-radios__input", checked: course.teacher_degree_apprenticeship? %>
          <%= form.label :funding,
                  "Teacher degree apprenticeship (TDA) with salary",
                  value: "teacher_degree_apprenticeship",
                  class: "govuk-label govuk-radios__label",
                  data: { qa: "course__funding_type_teacher_degree_apprenticeship" } %>
        </div>
      <% end %>
    </div>

  <%= form.hidden_field :previous_tda_course, value: params[:previous_tda_course] %>
  </fieldset>
<% end %>
