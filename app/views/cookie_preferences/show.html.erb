<% content_for :page_title, title_with_error_prefix("Cookies", @cookie_preferences_form.errors.present?) %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds-from-desktop">
    <%= form_with model: @cookie_preferences_form, url: cookies_path, method: :put do |f| %>

      <%= f.govuk_error_summary %>

      <h1 class="govuk-heading-l">Cookies on <%= t("service_name.publish") %></h1>

      <p class="govuk-body">Cookies are small files saved on your phone, tablet or computer when you visit a website.</p>

      <p class="govuk-body">We use cookies to make <%= t("service_name.publish") %> (Publish) work and collect information about how you use our service.</p>

      <h2 class="govuk-heading-m">Essential cookies</h3>

      <p class="govuk-body">Essential cookies keep your information secure while you use Publish. We do not need to ask permission to use them.</p>

      <table class="govuk-table app-table--vertical-align-middle" aria-describedby="essential_cookies_desc">
        <thead class="govuk-table__header">
          <tr class="govuk-table__row">
            <th class="govuk-table__header" scope="col">Name</th>
            <th class="govuk-table__header" scope="col">Purpose</th>
            <th class="govuk-table__header" scope="col">Expires</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          <tr scope="row" class="govuk-table__row">
            <td class="govuk-table__cell "><span class="break-word"><%= Settings.cookies.session.name %></span></td>
            <td class="govuk-table__cell ">Stores encrypted session data</td>
            <td class="govuk-table__cell ">When you close your browser</td>
          </tr>
          <tr scope="row" class="govuk-table__row">
            <td class="govuk-table__cell"><%= Settings.cookies.analytics.name %></td>
            <td class="govuk-table__cell">Saves your cookie consent settings</td>
            <td class="govuk-table__cell">6 months</td>
          </tr>
        </tbody>
      </table>

      <h2 class="govuk-heading-m">Cookies that measure website use (analytics)</h2>

      <p class="govuk-body">With your permission, we use Google Analytics to collect data about how you use Publish. This information helps us improve our service.</p>

      <p class="govuk-body">Google is not allowed to use or share our analytics data with anyone.</p>

      <p class="govuk-body">Google Analytics stores anonymised information about:</p>

      <ul class="govuk-list govuk-list--bullet">
        <li>how you got to Publish</li>
        <li>the pages you visit on this site and how long you spend on them</li>
        <li>what you click on while you’re visiting the site</li>
      </ul>

      <table class="govuk-table" aria-describedby="google_analytics_cookies_desc">
        <thead class="govuk-table__header">
          <tr>
            <th scope="col" class="govuk-table__header">Name</th>
            <th scope="col" class="govuk-table__header">Purpose</th>
            <th scope="col" class="govuk-table__header">Expires</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          <tr scope="row" class="govuk-table__row">
            <td class="govuk-table__cell">_ga</td>
            <td class="govuk-table__cell">Distinguishes anonymous users</td>
            <td class="govuk-table__cell">2 years</td>
          </tr>
          <tr scope="row" class="govuk-table__row">
            <td class="govuk-table__cell">_gid</td>
            <td class="govuk-table__cell">Distinguishes anonymous users</td>
            <td class="govuk-table__cell">24 hours</td>
          </tr>
        </tbody>
      </table>

      <%= f.govuk_collection_radio_buttons :analytics_consent,
                                          [%w[granted Yes], %w[denied No]],
                                          :first,
                                          :last,
                                          inline: true,
                                          legend: { text: "Do you want to accept cookies that measure website use (analytics)?", size: "s" } %>

      <%= f.govuk_submit("Save cookie settings") %>

      <p class="govuk-body">Read more about who we are, how you can contact us and how we process personal data in our <%= govuk_link_to("privacy notice", find_privacy_path) %>.</p>

      <p class="govuk-body">You can also <%= govuk_link_to("find out more about cookies in Google’s Privacy and Terms", t("google_privacy_policy_url"), target: "_blank") %>.</p>
    <% end %>
  </div>
</div>
