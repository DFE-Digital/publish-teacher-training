<% content_for :page_title, title_with_error_prefix("Cookies", @cookie_preferences_form.errors.present?) %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds-from-desktop">
    <%= form_with model: @cookie_preferences_form, url: cookies_path, method: :put do |f| %>

      <%= f.govuk_error_summary %>

      <h1 class="govuk-heading-xl">Cookies</h1>

      <p class="govuk-body">Cookies are small files saved on your phone, tablet or computer when you visit a website.</p>

      <p class="govuk-body">We use cookies to make ‘<%= t("service_name") %> (Publish)’ work and collect information about how you use our service.</p>

      <h2 class="govuk-heading-m">Essential cookies</h3>

      <p class="govuk-body">Essential cookies keep your information secure while you use Publish.</p>

      <p class="govuk-body">We do not need to ask permission to use them.</p>

      <table class="govuk-table app-table--vertical-align-middle" aria-describedby="essential_cookies_desc">
        <thead class="govuk-table__header">
          <tr class="govuk-table__row">
            <th class="govuk-table__header" scope="col">Name</th>
            <th class="govuk-table__header" scope="col">Purpose</th>
            <th class="govuk-table__header" scope="col">Expires</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          <tr scope="row" class="govuk-table__row">
            <td class="govuk-table__cell "><span class="break-word">_publish_teacher_training_courses_session</span></td>
            <td class="govuk-table__cell ">Remembers your identity when you are signed in</td>
            <td class="govuk-table__cell ">After 6 hours or on signing out</td>
          </tr>
          <tr scope="row" class="govuk-table__row">
            <td class="govuk-table__cell"><%= Settings.cookies.consent.name %></td>
            <td class="govuk-table__cell">Saves your cookie consent settings</td>
            <td class="govuk-table__cell">6 months</td>
          </tr>
        </tbody>
      </table>

      <h2 class="govuk-heading-m">Analytics cookies (optional)</h2>

      <p class="govuk-body">With your permission, we use Google Analytics to collect data about how you use Publish. This information helps us improve our service.</p>

      <p class="govuk-body">Google is not allowed to use or share our analytics data with anyone.</p>

      <p class="govuk-body">Google Analytics stores anonymised information about:</p>

      <ul class="govuk-list govuk-list--bullet">
        <li>how you got to Publish</li>
        <li>the pages you visit on this site and how long you spend on them</li>
        <li>what you click on while you’re visiting the site</li>
      </ul>

      <table class="govuk-table" aria-describedby="google_analytics_cookies_desc">
        <thead class="govuk-table__header">
          <tr>
            <th scope="col" class="govuk-table__header">Name</th>
            <th scope="col" class="govuk-table__header">Purpose</th>
            <th scope="col" class="govuk-table__header">Expires</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          <tr scope="row" class="govuk-table__row">
            <td class="govuk-table__cell">_ga</td>
            <td class="govuk-table__cell">Distinguishes anonymous users</td>
            <td class="govuk-table__cell">2 years</td>
          </tr>
          <tr scope="row" class="govuk-table__row">
            <td class="govuk-table__cell">_gid</td>
            <td class="govuk-table__cell">Distinguishes anonymous users</td>
            <td class="govuk-table__cell">24 hours</td>
          </tr>
          <tr scope="row" class="govuk-table__row">
            <td class="govuk-table__cell">_ga_RHM2PGFN72</td>
            <td class="govuk-table__cell">Throttle requests</td>
            <td class="govuk-table__cell">10 minutes</td>
          </tr>
        </tbody>
      </table>

      <%= f.govuk_collection_radio_buttons :consent,
                                          [%w[yes Yes], %w[no No]],
                                          :first,
                                          :last,
                                          legend: { text: "Do you want to accept Google Analytics cookies?", size: "s" } %>
      <%= f.govuk_submit("Save cookie settings") %>
    <% end %>
  </div>
</div>
