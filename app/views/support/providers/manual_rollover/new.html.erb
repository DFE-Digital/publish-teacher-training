<%= content_for(:breadcrumbs) do %>
  <%= render GovukComponent::BackLinkComponent.new(
    text: "All provider records",
    href: support_recruitment_cycle_providers_path,
  ) %>
<% end %>

<div class="govuk-caption-l"><%= Provider.human_attribute_name(@provider.provider_type) %></div>
<h1 class="govuk-heading-l">
  <%= govuk_link_to @provider.name_and_code, publish_provider_path(@provider.provider_code), no_visited_state: true %>
</h1>

<%= render "support/providers/navigation" %>

<% if @provider.can_be_rolled_over? %>
  <%= form_with model: @provider_manual_rollover_form, url: manual_rollover_confirm_support_recruitment_cycle_provider_path(@provider.recruitment_cycle_year, @provider), local: true, method: :post do |form| %>
    <%= form.govuk_error_summary %>

    <%= govuk_summary_list do |summary_list| %>
      <% summary_list.with_row do |row| %>
        <% row.with_key { t(".summary.courses") } %>
        <% row.with_value(text: @provider.courses.count) %>
      <% end %>
      <% summary_list.with_row do |row| %>
        <% row.with_key { t(".summary.schools") } %>
        <% row.with_value(text: @provider.sites.count) %>
      <% end %>
      <% summary_list.with_row do |row| %>
        <% row.with_key { t(".summary.study_sites") } %>
        <% row.with_value(text: @provider.study_sites.count) %>
      <% end %>
    <% end %>

    <h2 class="govuk-heading-m"><%= t(".confirm_heading") %></h2>

    <%= form.govuk_text_field :confirmation, label: { text: "Type ‘#{Support::Providers::ManualRolloverForm::CONFIRM_ROLLOVER}’ to confirm that you want to proceed", size: "m" }, width: 20, autocomplete: "off" %>

    <%= form.govuk_text_field :environment, label: { text: "Type ‘#{Settings.environment.name}’ to confirm that you want to proceed", size: "m" }, width: 20, autocomplete: "off" %>

    <%= form.govuk_submit t("continue") %>
  <% end %>
<% else %>
<% end %>
