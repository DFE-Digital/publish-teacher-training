# TODO: this can removed, in next refactor.
# This contains the json structure and the where the fields map to

---
#Course mappings
Course_default_value_Mapping: &Course_default_value
  Id: 0
  ProviderCodeName:
  ProviderId: 0
  AccreditingProviderId:
  AgeRange: 0
  RouteId: 0
  ProviderLocationId:
  Distance:
  DistanceAddress:
  ContactDetailsId:

Course_direct_simple_Mapping: &Course_direct_simple
  Name: "name"
  ProgrammeCode: "course_code"
  StartDate: "start_date"

#Provider mappings
Provider_default_value_Mapping: &Provider_default_value
  Id: 0
  Courses:
  AccreditedCourses:

Provider_direct_simple_Mapping: &Provider_direct_simple
  Name: provider_name
  ProviderCode: provider_code

Provider_Mapping: &Provider # Has a provider
  <<: *Provider_default_value
  <<: *Provider_direct_simple

Provider_serializer_Mapping: &Provider_serializer
  Provider: # Has a provider
    <<: *Provider
  AccreditingProvider: # Optional accrediting provider (provider type)
    <<: *Provider

Salary_nested_default_value_Mapping: &Salary
  Minimum:
  Maximum:

Subject_default_value_Mapping: &Subject_default_value
  Id: 0
  SubjectArea:
  FundingId:
  Funding:
  IsSubjectKnowledgeEnhancementAvailable: false
  CourseSubjects:

Subject_direct_Mapping: &Subject_direct
  Name: 'subject_name'

Subject_Mapping: &Subject
  <<: &Subject_default_value
  <<: &Subject_direct

CourseSubject_default_value_Mapping: &CourseSubject_default_value
  CourseId: 0
  Course:
  SubjectId: 0

CourseSubject_complex_Mapping: &CourseSubject_complex
  Subject:
    <<: *Subject

CourseSubject_Mapping: &CourseSubject
  <<: &CourseSubject_default_value
  <<: &CourseSubject_complex

Subjects_related_Mapping: &Subjects_related
  IsSen: is_send?
  CourseSubjects:
  - <<: *CourseSubject

IsSalaried_Mapping: &IsSalaried
  IsSalaried: '!course.is_fee_based?'

Route_default_value_Mapping: &Route_default_value
  Id: 0
  Courses:

Route_Complex_value_Mapping: &Route_Complex_value
  <<: *IsSalaried
  Name: course.program_type

Route_Mapping: &Route
  <<: *Route_default_value
  <<: *Route_Complex_value

Mod_Mapping: &Mod
  Mod: course.description

IncludesPgce_Mapping: &IncludesPgce
  IncludesPgce: course.description
  # {CourseQualification.Qts, IncludesPgce.No} 0,
  # {CourseQualification.QtsWithPgce, IncludesPgce.Yes} 1,
  # {CourseQualification.QtsWithPgde, IncludesPgce.QtsWithPgde} 3,
  # {CourseQualification.QtlsWithPgce, IncludesPgce.QtlsWithPgce} 5,
  # {CourseQualification.QtlsWithPgde, IncludesPgce.QtlsWithPgde} 6

  # No = 0,
  # Yes = 1,
  # QtsWithOptionalPgce = 2,
  # QtsWithPgde = 3,
  # QtlsOnly = 4,
  # QtlsWithPgce = 5,
  # QtlsWithPgde = 6
FullTime_mapping: &FullTime
  FullTime: 'object.part_time? ? 3 : 1'
  # FullTime = ucasCourseData.StudyMode == "P" ? VacancyStatus.NA : VacancyStatus.Vacancies,

PartTime_mapping: &PartTime
  PartTime: 'object.full_time? ? 3 : 1'
  # PartTime = ucasCourseData.StudyMode == "F" ? VacancyStatus.NA : VacancyStatus.Vacancies,
Course_variant_Mapping: &Course_variant
  <<: *IsSalaried
  <<: *Route
  <<: *Mod
  <<: *IncludesPgce
  <<: *FullTime
  <<: *PartTime

Location_default_value_Mapping: &Location_default_value
  Id: 0
  FormattedAddress:
  GeoAddress:
  Latitude:
  Longitude:
  LastGeocodedUtc: '0001-01-01T00:00:00'

Location_Mapping: &Location
  *Location_default_value
  Address: "[address1, address2, address3, address4, postcode].reject(&:blank?).join('/n')"


Campus_default_value_Mapping: &Campus_default_value
  Id: 0
  LocationId:
  Course:

Campus_direct_value_Mapping: &Campus_direct_value
  Name: site_status.site.location_name
  CampusCode: site_status.site.code
  VacStatus: site_status.vac_status_before_type_cast

Campus_Mapping: &Campus
  *Campus_default_value
  *Campus_direct_value
  Location:
    <<: *Location

Campuses_related_Mapping: &Campuses_related
  ApplicationsAcceptedFrom: applications_open_from
  Campuses:
    - <<: *Campus
  HasVacancies: has_vacancies?

Fees_Mapping: &Fees
  Uk: "is_salaried? ? 0 : course_enrichment.fee_uk_eu"
  Eu: "is_salaried? ? 0 : course_enrichment.fee_uk_eu"
  International: "is_salaried? ? 0 : course_enrichment.fee_international,"

Course_direct_enrichment_Mapping: &Course_direct_enrichment
  Duration: enrichement.course_length
  Fees:
    <<: *Fees

ContactDetails_default_value_Mapping: &ContactDetails_default_value
  Id: 0
  Course:
  Fax:

ContactDetails_Mapping: &ContactDetails
  *ContactDetails_default_value
  Phone:
  Email:
  Website:
  Address:

Provider_contact_info_Mapping: &Provider_contact_info
  ProviderLocation:
    <<: *Location
  ContactDetails:
    <<: *ContactDetails

Location_default_value_Mapping: &Location_default_value
  Id: 0
  FormattedAddress:
  GeoAddress:
  Latitude:
  Longitude:
  LastGeocodedUtc: '0001-01-01T00:00:00'

Location_Mapping: &Location
  *Location_default_value
  Address: "[address1, address2, address3, address4, postcode].reject(&:blank?).join('/n')"

DescriptionSection_Mapping: &DescriptionSection
  Id: 0
  Ordinal: 0
  CourseId: 0
  Course:

DescriptionSections_Mapping: &DescriptionSections
  DescriptionSections:
  - <<: *DescriptionSection
    Name: "about this training programme"
    Text: 'AboutCourse'
    __Name: 'snc field key'
    __Text: 'enrichment field key'
    __EnrichmentType: 'course_enrichment'
    __CourseDetailsSections: "AboutTheCourse" #snc ui section

  - <<: *DescriptionSection
    Name: "interview process"
    Text: 'InterviewProcess'
    __Name: "interview process"
    __Text: 'InterviewProcess'
    __EnrichmentType: 'course_enrichment'
    __CourseDetailsSections: "InterviewProcess" #snc ui section

  - <<: *DescriptionSection
    Name: "about fees"
    Text: 'FeeDetails'
    __Name: 'snc field key'
    __Text: 'enrichment field key'
    __EnrichmentType: 'course_enrichment'
    __CourseDetailsSections: "AboutFees" #snc ui section

  - <<: *DescriptionSection
    Name: "about salary"
    Text: 'SalaryDetails'
    __Name: 'snc field key'
    __Text: 'enrichment field key'
    __EnrichmentType: 'course_enrichment'
    __CourseDetailsSections: "AboutSalary" #snc ui section

  - <<: *DescriptionSection
    Name: "entry requirements"
    Text: 'Qualifications'
    __Name: 'snc field key'
    __Text: 'enrichment field key'
    __EnrichmentType: 'course_enrichment'
    __CourseDetailsSections: "EntryRequirementsQualifications" #snc ui section

  - <<: *DescriptionSection
    Name: "entry requirements personal qualities"
    Text: 'PersonalQualities'
    __Name: 'snc field key'
    __Text: 'enrichment field key'
    __EnrichmentType: 'course_enrichment'
    __CourseDetailsSections: "EntryRequirementsPersonalQualities" #snc ui section

  - <<: *DescriptionSection
    Name: "entry requirements other"
    Text: 'OtherRequirements'
    __Name: 'snc field key'
    __Text: 'enrichment field key'
    __EnrichmentType: 'course_enrichment'
    __CourseDetailsSections: "EntryRequirementsOther" #snc ui section

  - <<: *DescriptionSection
    Name: "financial support"
    Text: 'FinancialSupport'
    __Name: 'snc field key'
    __Text: 'enrichment field key'
    __EnrichmentType: 'course_enrichment'
    __CourseDetailsSections: "FinancialSupport" #snc ui section

  - <<: *DescriptionSection
    Name: "about school placements"
    Text: 'HowSchoolPlacementsWork'
    __Name: 'snc field key'
    __Text: 'enrichment field key'
    __EnrichmentType: 'course_enrichment'
    __CourseDetailsSections: "AboutSchools" #snc ui section

  - <<: *DescriptionSection
    Name: "about this training provider"
    Text: 'TrainWithUs'
    __Name: 'snc field key'
    __Text: 'enrichment field key'
    __EnrichmentType: 'provider_enrichment'
    __CourseDetailsSections: "AboutTheProvider" #snc ui section

    - <<: *DescriptionSection
    Name: "about this training provider accrediting"
    Text: GetAccreditingProviderEnrichment(ucasCourseData?.AccreditingProvider?.ProviderCode"
    __Name: 'snc field key'
    __Text: 'the accrediting provider code as identifier'
    __EnrichmentType: 'accreditingProvider_provider_enrichment'

  - <<: *DescriptionSection
    Name: "training with disabilities"
    Text: 'TrainWithDisability'
    __Name: 'snc field key'
    __Text: 'enrichment field key'
    __EnrichmentType: 'provider_enrichment'
    __CourseDetailsSections: "TrainWithDisabilities" #snc ui sectionmpuses:


# Actual course
Course_Full_Mapping:
  <<: *Provider_serializer
  <<: *Course_default_value
  <<: *Course_direct_simple
  Salary:
    <<: *Salary
  <<: *Subjects_related
  <<: *Course_variant
  <<: *Campuses_related
  <<: *Course_direct_enrichment
  <<: *Provider_contact_info
  <<: *DescriptionSections
